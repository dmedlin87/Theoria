:root {
  color-scheme: light;

  --accent-hue: 241;
  --accent-saturation: 84%;
  --accent-lightness: 66%;
  --accent-hover-shift: -8%;
  --accent-strong-shift: -18%;
  --accent-soft-alpha: 0.12;
  --accent-glow-alpha: 0.2;

  --neutral-hue: 222;
  --neutral-saturation: 34%;
  --surface-lightness: 98%;
  --surface-contrast-color: hsl(var(--neutral-hue) var(--neutral-saturation) 42%);
  --surface-muted-contrast: 18%;
  --surface-hover-contrast: 10%;
  --surface-raised-opacity: 95%;

  --border-subtle-contrast: 32%;
  --border-default-contrast: 46%;
  --border-strong-contrast: 58%;

  --text-primary-saturation: 46%;
  --text-secondary-saturation: 34%;
  --text-muted-saturation: 28%;
  --text-primary-lightness: 14%;
  --text-secondary-lightness: 36%;
  --text-muted-lightness: 50%;
  --text-inverse-lightness: 98%;

  --nav-surface-opacity: 88%;
  --nav-border-opacity: 55%;
  --command-surface-opacity: 94%;
  --command-border-opacity: 48%;

  --shadow-color: 223 40% 18%;
  --shadow-ambient-opacity: 0.08;
  --shadow-key-opacity: 0.04;
  --shadow-glow-alpha: 0.15;

  --background-surface-weight: 85%;
  --background-mid-weight: 70%;
  --background-accent-weight: 18%;

  --color-accent: hsl(var(--accent-hue) var(--accent-saturation) var(--accent-lightness));
  --color-accent-hover: hsl(
    var(--accent-hue)
    var(--accent-saturation)
    calc(var(--accent-lightness) + var(--accent-hover-shift))
  );
  --color-accent-strong: hsl(
    var(--accent-hue)
    var(--accent-saturation)
    calc(var(--accent-lightness) + var(--accent-strong-shift))
  );
  --color-accent-soft: hsl(
    var(--accent-hue)
    var(--accent-saturation)
    var(--accent-lightness)
    / var(--accent-soft-alpha)
  );
  --color-accent-glow: hsl(
    var(--accent-hue)
    var(--accent-saturation)
    var(--accent-lightness)
    / var(--accent-glow-alpha)
  );

  --color-surface-base: hsl(var(--neutral-hue) var(--neutral-saturation) var(--surface-lightness));
  --color-surface: var(--color-surface-base);
  --color-surface-muted: color-mix(
    in srgb,
    var(--color-surface-base) calc(100% - var(--surface-muted-contrast)),
    var(--surface-contrast-color) var(--surface-muted-contrast)
  );
  --color-surface-hover: color-mix(
    in srgb,
    var(--color-surface-base) calc(100% - var(--surface-hover-contrast)),
    var(--surface-contrast-color) var(--surface-hover-contrast)
  );
  --color-surface-raised: color-mix(
    in srgb,
    var(--color-surface-base) var(--surface-raised-opacity),
    transparent calc(100% - var(--surface-raised-opacity))
  );

  --color-border-subtle: color-mix(
    in srgb,
    var(--color-surface-base) calc(100% - var(--border-subtle-contrast)),
    var(--surface-contrast-color) var(--border-subtle-contrast)
  );
  --color-border-default: color-mix(
    in srgb,
    var(--color-surface-base) calc(100% - var(--border-default-contrast)),
    var(--surface-contrast-color) var(--border-default-contrast)
  );
  --color-border-strong: color-mix(
    in srgb,
    var(--color-surface-base) calc(100% - var(--border-strong-contrast)),
    var(--surface-contrast-color) var(--border-strong-contrast)
  );

  --color-text-primary: hsl(
    var(--neutral-hue)
    var(--text-primary-saturation)
    var(--text-primary-lightness)
  );
  --color-text-secondary: hsl(
    var(--neutral-hue)
    var(--text-secondary-saturation)
    var(--text-secondary-lightness)
  );
  --color-text-muted: hsl(
    var(--neutral-hue)
    var(--text-muted-saturation)
    var(--text-muted-lightness)
  );
  --color-text-inverse: hsl(
    var(--neutral-hue)
    var(--text-primary-saturation)
    var(--text-inverse-lightness)
  );

  --color-nav-surface: color-mix(
    in srgb,
    var(--color-surface-base) var(--nav-surface-opacity),
    transparent calc(100% - var(--nav-surface-opacity))
  );
  --color-nav-border: color-mix(
    in srgb,
    var(--color-border-default) var(--nav-border-opacity),
    transparent calc(100% - var(--nav-border-opacity))
  );

  --color-command-surface: color-mix(
    in srgb,
    var(--color-surface-base) var(--command-surface-opacity),
    transparent calc(100% - var(--command-surface-opacity))
  );
  --color-command-border: color-mix(
    in srgb,
    var(--color-border-default) var(--command-border-opacity),
    transparent calc(100% - var(--command-border-opacity))
  );

  --color-app-background: linear-gradient(
    135deg,
    color-mix(
      in srgb,
      var(--color-surface-base) var(--background-surface-weight),
      var(--surface-contrast-color)
    ) 0%,
    color-mix(
      in srgb,
      var(--color-surface-base) var(--background-mid-weight),
      transparent
    ) 50%,
    color-mix(
      in srgb,
      var(--color-accent) var(--background-accent-weight),
      var(--color-surface-base)
    ) 100%
  );

  --color-positive: hsl(152 78% 42%);
  --color-warning: hsl(38 92% 52%);
  --color-danger: hsl(0 83% 58%);

  --shadow-xs: 0 1px 2px hsla(var(--shadow-color) / var(--shadow-key-opacity));
  --shadow-sm: 0 2px 8px hsla(var(--shadow-color) / var(--shadow-ambient-opacity)),
    0 1px 3px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 0.6));
  --shadow-md: 0 8px 24px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 1.5)),
    0 2px 8px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 0.75));
  --shadow-lg: 0 16px 48px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 2)),
    0 4px 12px hsla(var(--shadow-color) / var(--shadow-ambient-opacity));
  --shadow-xl: 0 24px 64px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 2.6)),
    0 8px 24px hsla(var(--shadow-color) / calc(var(--shadow-ambient-opacity) * 1.25));
  --shadow-glow: 0 0 40px hsl(
      var(--accent-hue)
      var(--accent-saturation)
      var(--accent-lightness)
      / var(--shadow-glow-alpha)
    );

  --surface: var(--color-surface);
  --surface-muted: var(--color-surface-muted);
  --surface-hover: var(--color-surface-hover);
  --surface-raised: var(--color-surface-raised);
  --surface-contrast: var(--surface-contrast-color);
  --border: var(--color-border-default);
  --border-muted: var(--color-border-subtle);
  --border-strong: var(--color-border-strong);
  --text: var(--color-text-primary);
  --text-muted: var(--color-text-muted);
  --accent: var(--color-accent);
  --accent-soft: var(--color-accent-soft);
  --accent-strong: var(--color-accent-strong);
  --accent-glow: var(--color-accent-glow);
  --shadow: var(--shadow-md);
}

/* Smooth transitions for theme changes */
:root {
  transition: background 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Explicit light theme */
[data-theme="light"] {
  color-scheme: light;
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --accent-lightness: 72%;
    --accent-hover-shift: 4%;
    --accent-strong-shift: 10%;

    --surface-lightness: 16%;
    --surface-contrast-color: hsl(var(--neutral-hue) var(--neutral-saturation) 92%);
    --surface-muted-contrast: 14%;
    --surface-hover-contrast: 10%;
    --surface-raised-opacity: 78%;

    --border-subtle-contrast: 22%;
    --border-default-contrast: 36%;
    --border-strong-contrast: 52%;

    --text-primary-saturation: 32%;
    --text-secondary-saturation: 26%;
    --text-muted-saturation: 20%;
    --text-primary-lightness: 92%;
    --text-secondary-lightness: 78%;
    --text-muted-lightness: 66%;
    --text-inverse-lightness: 14%;

    --nav-surface-opacity: 78%;
    --nav-border-opacity: 48%;
    --command-surface-opacity: 70%;
    --command-border-opacity: 45%;

    --shadow-color: 223 52% 4%;
    --shadow-ambient-opacity: 0.5;
    --shadow-key-opacity: 0.35;
    --shadow-glow-alpha: 0.22;

    --background-surface-weight: 55%;
    --background-mid-weight: 62%;
    --background-accent-weight: 26%;
  }
}

[data-theme="dark"] {
  color-scheme: dark;
  --accent-lightness: 72%;
  --accent-hover-shift: 4%;
  --accent-strong-shift: 10%;

  --surface-lightness: 16%;
  --surface-contrast-color: hsl(var(--neutral-hue) var(--neutral-saturation) 92%);
  --surface-muted-contrast: 14%;
  --surface-hover-contrast: 10%;
  --surface-raised-opacity: 78%;

  --border-subtle-contrast: 22%;
  --border-default-contrast: 36%;
  --border-strong-contrast: 52%;

  --text-primary-saturation: 32%;
  --text-secondary-saturation: 26%;
  --text-muted-saturation: 20%;
  --text-primary-lightness: 92%;
  --text-secondary-lightness: 78%;
  --text-muted-lightness: 66%;
  --text-inverse-lightness: 14%;

  --nav-surface-opacity: 78%;
  --nav-border-opacity: 48%;
  --command-surface-opacity: 70%;
  --command-border-opacity: 45%;

  --shadow-color: 223 52% 4%;
  --shadow-ambient-opacity: 0.5;
  --shadow-key-opacity: 0.35;
  --shadow-glow-alpha: 0.22;

  --background-surface-weight: 55%;
  --background-mid-weight: 62%;
  --background-accent-weight: 26%;
}
